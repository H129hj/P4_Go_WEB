{{define "GamePlay"}}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/css/game.css">
    <title>Puissance 4</title>
</head>
<body>
<header>
    <h1>Puissance 4</h1>
    <nav class="nav-links">
        <a href="/" class="nav-btn">Accueil</a>
    </nav>
    <div class="players-info">
        <div class="player-card {{if eq .CurrentPlayerIndex 0}}active{{end}}" data-player="1">
            <div class="player-header">
                <span class="player-label">Joueur 1</span>
                <span class="player-token {{.JetonCouleur}}"></span>
            </div>
            <div class="player-name">{{.Joueur1}}</div>
        </div>
        <div class="player-card {{if eq .CurrentPlayerIndex 1}}active{{end}}" data-player="2">
            <div class="player-header">
                <span class="player-label">Joueur 2</span>
                <span class="player-token {{if eq .JetonCouleur "rouge"}}jaune{{else}}rouge{{end}}"></span>
            </div>
            <div class="player-name">{{.Joueur2}}</div>
        </div>
    </div>
    {{if .Message}}
    <p class="message">{{.Message}}</p>
    {{end}}
    <div class="turn-status">
        {{if .Winner}}
        <p class="status winner">Gagnant : {{.Winner}}</p>
        {{else if .Draw}}
        <p class="status draw">Match nul !</p>
        {{else}}
        <p class="status active">Au tour de <span class="current-player">{{.CurrentPlayerName}}</span></p>
        {{end}}
    </div>
</header>

<main>
    {{if not .Winner}}
    {{if not .Draw}}
    <section class="actions">
        <form action="/game/play/move" method="post">
            <label for="column">Choisissez une colonne :</label>
            <div class="colonnes">
                {{range .Columns}}
                <button type="submit" name="column" value="{{.}}" aria-label="Choisir la colonne {{.}}" title="Choisir la colonne {{.}}">
                    &darr;
                </button>
                {{end}}
            </div>
        </form>
    </section>
    {{end}}
    {{end}}

    <section class="grille">
        {{range .Grille}}
        <div class="ligne">
            {{range .}}
            <div class="cellule {{.}}"></div>
            {{end}}
        </div>
        {{end}}
    </section>
</main>
{{if or .Winner .Draw}}
<script>
    setTimeout(function() {
        window.location.href = '/game/end';
    }, 3000);
</script>
{{end}}
</body>
</html>
{{end}}